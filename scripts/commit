#!/bin/sh

clear

# ------------------------------------------------------
DATE=$(date +%d/%m/%Y"-"%H:%M:%S)
# ------------------------------------------------------

# ------------------------------------------------------
npx prettier --write .
clear
# ------------------------------------------------------

# ------------------------------------------------------
npx eslint --fix .
if [ $? -eq 0 ]; then
  echo "Eslint [Ok]"
  echo " "
else
  echo "Fix eslint errors first!" >&2
  echo ""
  echo ""
  exit 1
fi
# ------------------------------------------------------

sleep 1

# ------------------------------------------------------
echo "Enter the commit message:"
read MESSAGE
wait
if [ -z "$MESSAGE" ]; then
  echo "Needs a commit message!"
  exit 1
fi
# ------------------------------------------------------

# ------------------------------------------------------
git add .
git commit -am "${MESSAGE} ($USER)"
echo ""
echo "Done!"
# ------------------------------------------------------

exit 0
